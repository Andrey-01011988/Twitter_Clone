Attaching to project_server_1
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
[36mserver_1  |[0m The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"
[36mserver_1  |[0m 
[36mserver_1  |[0m   warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
[36mserver_1  |[0m ============================= test session starts ==============================
[36mserver_1  |[0m platform linux -- Python 3.11.11, pytest-8.3.3, pluggy-1.5.0 -- /usr/local/bin/python3.11
[36mserver_1  |[0m cachedir: .pytest_cache
[36mserver_1  |[0m rootdir: /server
[36mserver_1  |[0m plugins: asyncio-0.24.0, Faker-30.8.2, anyio-4.6.2.post1
[36mserver_1  |[0m asyncio: mode=Mode.STRICT, default_loop_scope=None
[36mserver_1  |[0m collecting ... collected 1 item
[36mserver_1  |[0m 
[36mserver_1  |[0m tests/test_application.py::test_all_users FAILED                         [100%]
[36mserver_1  |[0m 
[36mserver_1  |[0m =================================== FAILURES ===================================
[36mserver_1  |[0m ________________________________ test_all_users ________________________________
[36mserver_1  |[0m   + Exception Group Traceback (most recent call last):
[36mserver_1  |[0m   |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
[36mserver_1  |[0m   |     yield
[36mserver_1  |[0m   |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 186, in __call__
[36mserver_1  |[0m   |     async with anyio.create_task_group() as task_group:
[36mserver_1  |[0m   |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 763, in __aexit__
[36mserver_1  |[0m   |     raise BaseExceptionGroup(
[36mserver_1  |[0m   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
[36mserver_1  |[0m   +-+---------------- 1 ----------------
[36mserver_1  |[0m     | Traceback (most recent call last):
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
[36mserver_1  |[0m     |     result: TResult | None = func()
[36mserver_1  |[0m     |                              ^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/runner.py", line 242, in <lambda>
[36mserver_1  |[0m     |     lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
[36mserver_1  |[0m     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_hooks.py", line 513, in __call__
[36mserver_1  |[0m     |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
[36mserver_1  |[0m     |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 139, in _multicall
[36mserver_1  |[0m     |     raise exception.with_traceback(exception.__traceback__)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/threadexception.py", line 92, in pytest_runtest_call
[36mserver_1  |[0m     |     yield from thread_exception_runtest_hook()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/threadexception.py", line 68, in thread_exception_runtest_hook
[36mserver_1  |[0m     |     yield
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/unraisableexception.py", line 95, in pytest_runtest_call
[36mserver_1  |[0m     |     yield from unraisable_exception_runtest_hook()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/unraisableexception.py", line 70, in unraisable_exception_runtest_hook
[36mserver_1  |[0m     |     yield
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/logging.py", line 846, in pytest_runtest_call
[36mserver_1  |[0m     |     yield from self._runtest_for(item, "call")
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/logging.py", line 829, in _runtest_for
[36mserver_1  |[0m     |     yield
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/capture.py", line 880, in pytest_runtest_call
[36mserver_1  |[0m     |     return (yield)
[36mserver_1  |[0m     |             ^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/skipping.py", line 257, in pytest_runtest_call
[36mserver_1  |[0m     |     return (yield)
[36mserver_1  |[0m     |             ^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 103, in _multicall
[36mserver_1  |[0m     |     res = hook_impl.function(*args)
[36mserver_1  |[0m     |           ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/runner.py", line 174, in pytest_runtest_call
[36mserver_1  |[0m     |     item.runtest()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 457, in runtest
[36mserver_1  |[0m     |     super().runtest()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/python.py", line 1627, in runtest
[36mserver_1  |[0m     |     self.ihook.pytest_pyfunc_call(pyfuncitem=self)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_hooks.py", line 513, in __call__
[36mserver_1  |[0m     |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
[36mserver_1  |[0m     |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 182, in _multicall
[36mserver_1  |[0m     |     return outcome.get_result()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_result.py", line 100, in get_result
[36mserver_1  |[0m     |     raise exc.with_traceback(exc.__traceback__)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 103, in _multicall
[36mserver_1  |[0m     |     res = hook_impl.function(*args)
[36mserver_1  |[0m     |           ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/python.py", line 159, in pytest_pyfunc_call
[36mserver_1  |[0m     |     result = testfunction(**testargs)
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 929, in inner
[36mserver_1  |[0m     |     _loop.run_until_complete(task)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
[36mserver_1  |[0m     |     return future.result()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/tests/test_application.py", line 11, in test_all_users
[36mserver_1  |[0m     |     response = client.get("/api/all_users")
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 514, in get
[36mserver_1  |[0m     |     return super().get(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 1066, in get
[36mserver_1  |[0m     |     return self.request(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 484, in request
[36mserver_1  |[0m     |     return super().request(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
[36mserver_1  |[0m     |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
[36mserver_1  |[0m     |     response = self._send_handling_auth(
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
[36mserver_1  |[0m     |     response = self._send_handling_redirects(
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
[36mserver_1  |[0m     |     response = self._send_single_request(request)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
[36mserver_1  |[0m     |     response = transport.handle_request(request)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 377, in handle_request
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 374, in handle_request
[36mserver_1  |[0m     |     portal.call(self.app, scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/anyio/from_thread.py", line 290, in call
[36mserver_1  |[0m     |     return cast(T_Retval, self.start_task_soon(func, *args).result())
[36mserver_1  |[0m     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/concurrent/futures/_base.py", line 456, in result
[36mserver_1  |[0m     |     return self.__get_result()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result
[36mserver_1  |[0m     |     raise self._exception
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/anyio/from_thread.py", line 221, in _call_func
[36mserver_1  |[0m     |     retval = await retval_or_awaitable
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
[36mserver_1  |[0m     |     await super().__call__(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
[36mserver_1  |[0m     |     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
[36mserver_1  |[0m     |     await self.app(scope, receive, _send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
[36mserver_1  |[0m     |     with collapse_excgroups():
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
[36mserver_1  |[0m     |     self.gen.throw(typ, value, traceback)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
[36mserver_1  |[0m     |     response = await self.dispatch_func(request, call_next)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/application/main.py", line 72, in check_user_middleware
[36mserver_1  |[0m     |     response = await call_next(request)  # Передаем управление следующему обработчику
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
[36mserver_1  |[0m     |     raise app_exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
[36mserver_1  |[0m     |     await self.app(scope, receive_or_disconnect, send_no_error)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
[36mserver_1  |[0m     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
[36mserver_1  |[0m     |     await app(scope, receive, sender)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
[36mserver_1  |[0m     |     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
[36mserver_1  |[0m     |     await route.handle(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
[36mserver_1  |[0m     |     await self.app(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
[36mserver_1  |[0m     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
[36mserver_1  |[0m     |     await app(scope, receive, sender)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
[36mserver_1  |[0m     |     response = await f(request)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
[36mserver_1  |[0m     |     raw_response = await run_endpoint_function(
[36mserver_1  |[0m     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
[36mserver_1  |[0m     |     return await dependant.call(**values)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/application/api/endpoints.py", line 28, in get_all_users
[36mserver_1  |[0m     |     result = await UserDAO.find_all()
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/application/crud.py", line 86, in find_all
[36mserver_1  |[0m     |     result = await session.execute(query)
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
[36mserver_1  |[0m     |     result = await greenlet_spawn(
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
[36mserver_1  |[0m     |     result = context.throw(*sys.exc_info())
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
[36mserver_1  |[0m     |     return self._execute_internal(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
[36mserver_1  |[0m     |     conn = self._connection_for_bind(bind)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
[36mserver_1  |[0m     |     return trans._connection_for_bind(engine, execution_options)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "<string>", line 2, in _connection_for_bind
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
[36mserver_1  |[0m     |     ret_value = fn(self, *arg, **kw)
[36mserver_1  |[0m     |                 ^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
[36mserver_1  |[0m     |     conn = bind.connect()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
[36mserver_1  |[0m     |     return self._connection_cls(self)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
[36mserver_1  |[0m     |     self._dbapi_connection = engine.raw_connection()
[36mserver_1  |[0m     |                              ^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
[36mserver_1  |[0m     |     return self.pool.connect()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 449, in connect
[36mserver_1  |[0m     |     return _ConnectionFairy._checkout(self)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
[36mserver_1  |[0m     |     fairy = _ConnectionRecord.checkout(pool)
[36mserver_1  |[0m     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
[36mserver_1  |[0m     |     rec = pool._do_get()
[36mserver_1  |[0m     |           ^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
[36mserver_1  |[0m     |     with util.safe_reraise():
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
[36mserver_1  |[0m     |     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
[36mserver_1  |[0m     |     return self._create_connection()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
[36mserver_1  |[0m     |     return _ConnectionRecord(self)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
[36mserver_1  |[0m     |     self.__connect()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
[36mserver_1  |[0m     |     with util.safe_reraise():
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
[36mserver_1  |[0m     |     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
[36mserver_1  |[0m     |     self.dbapi_connection = connection = pool._invoke_creator(self)
[36mserver_1  |[0m     |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 643, in connect
[36mserver_1  |[0m     |     return dialect.connect(*cargs, **cparams)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 621, in connect
[36mserver_1  |[0m     |     return self.loaded_dbapi.connect(*cargs, **cparams)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 949, in connect
[36mserver_1  |[0m     |     await_only(creator_fn(*arg, **kw)),
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
[36mserver_1  |[0m     |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
[36mserver_1  |[0m     |     value = await result
[36mserver_1  |[0m     |             ^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2421, in connect
[36mserver_1  |[0m     |     return await connect_utils._connect(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1075, in _connect
[36mserver_1  |[0m     |     raise last_error or exceptions.TargetServerAttributeNotMatched(
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1049, in _connect
[36mserver_1  |[0m     |     conn = await _connect_addr(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 886, in _connect_addr
[36mserver_1  |[0m     |     return await __connect_addr(params, True, *args)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 931, in __connect_addr
[36mserver_1  |[0m     |     tr, pr = await connector
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 802, in _create_ssl_connection
[36mserver_1  |[0m     |     tr, pr = await loop.create_connection(
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1046, in create_connection
[36mserver_1  |[0m     |     infos = await self._ensure_resolved(
[36mserver_1  |[0m     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1420, in _ensure_resolved
[36mserver_1  |[0m     |     return await loop.getaddrinfo(host, port, family=family, type=type,
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 868, in getaddrinfo
[36mserver_1  |[0m     |     return await self.run_in_executor(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
[36mserver_1  |[0m     |     result = self.fn(*self.args, **self.kwargs)
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/socket.py", line 974, in getaddrinfo
[36mserver_1  |[0m     |     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     | socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mserver_1  |[0m     +------------------------------------
[36mserver_1  |[0m 
[36mserver_1  |[0m During handling of the above exception, another exception occurred:
[36mserver_1  |[0m 
[36mserver_1  |[0m setup_database = <async_generator object setup_database at 0x7c54e833fa00>
[36mserver_1  |[0m 
[36mserver_1  |[0m     @pytest.mark.asyncio
[36mserver_1  |[0m     async def test_all_users(setup_database):
[36mserver_1  |[0m         """ Проверка всех GET маршрутов """
[36mserver_1  |[0m >       response = client.get("/api/all_users")
[36mserver_1  |[0m 
[36mserver_1  |[0m tests/test_application.py:11: 
[36mserver_1  |[0m _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:514: in get
[36mserver_1  |[0m     return super().get(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:1066: in get
[36mserver_1  |[0m     return self.request(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:484: in request
[36mserver_1  |[0m     return super().request(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:837: in request
[36mserver_1  |[0m     return self.send(request, auth=auth, follow_redirects=follow_redirects)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:926: in send
[36mserver_1  |[0m     response = self._send_handling_auth(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:954: in _send_handling_auth
[36mserver_1  |[0m     response = self._send_handling_redirects(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:991: in _send_handling_redirects
[36mserver_1  |[0m     response = self._send_single_request(request)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:1027: in _send_single_request
[36mserver_1  |[0m     response = transport.handle_request(request)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:377: in handle_request
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:374: in handle_request
[36mserver_1  |[0m     portal.call(self.app, scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/anyio/from_thread.py:290: in call
[36mserver_1  |[0m     return cast(T_Retval, self.start_task_soon(func, *args).result())
[36mserver_1  |[0m /usr/local/lib/python3.11/concurrent/futures/_base.py:456: in result
[36mserver_1  |[0m     return self.__get_result()
[36mserver_1  |[0m /usr/local/lib/python3.11/concurrent/futures/_base.py:401: in __get_result
[36mserver_1  |[0m     raise self._exception
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/anyio/from_thread.py:221: in _call_func
[36mserver_1  |[0m     retval = await retval_or_awaitable
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__
[36mserver_1  |[0m     await super().__call__(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/applications.py:113: in __call__
[36mserver_1  |[0m     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__
[36mserver_1  |[0m     await self.app(scope, receive, _send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:185: in __call__
[36mserver_1  |[0m     with collapse_excgroups():
[36mserver_1  |[0m /usr/local/lib/python3.11/contextlib.py:158: in __exit__
[36mserver_1  |[0m     self.gen.throw(typ, value, traceback)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_utils.py:82: in collapse_excgroups
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:187: in __call__
[36mserver_1  |[0m     response = await self.dispatch_func(request, call_next)
[36mserver_1  |[0m application/main.py:72: in check_user_middleware
[36mserver_1  |[0m     response = await call_next(request)  # Передаем управление следующему обработчику
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:163: in call_next
[36mserver_1  |[0m     raise app_exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:149: in coro
[36mserver_1  |[0m     await self.app(scope, receive_or_disconnect, send_no_error)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__
[36mserver_1  |[0m     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:53: in wrapped_app
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:42: in wrapped_app
[36mserver_1  |[0m     await app(scope, receive, sender)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:715: in __call__
[36mserver_1  |[0m     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:735: in app
[36mserver_1  |[0m     await route.handle(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:288: in handle
[36mserver_1  |[0m     await self.app(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:76: in app
[36mserver_1  |[0m     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:53: in wrapped_app
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:42: in wrapped_app
[36mserver_1  |[0m     await app(scope, receive, sender)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:73: in app
[36mserver_1  |[0m     response = await f(request)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/fastapi/routing.py:301: in app
[36mserver_1  |[0m     raw_response = await run_endpoint_function(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/fastapi/routing.py:212: in run_endpoint_function
[36mserver_1  |[0m     return await dependant.call(**values)
[36mserver_1  |[0m application/api/endpoints.py:28: in get_all_users
[36mserver_1  |[0m     result = await UserDAO.find_all()
[36mserver_1  |[0m application/crud.py:86: in find_all
[36mserver_1  |[0m     result = await session.execute(query)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py:461: in execute
[36mserver_1  |[0m     result = await greenlet_spawn(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py:201: in greenlet_spawn
[36mserver_1  |[0m     result = context.throw(*sys.exc_info())
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:2362: in execute
[36mserver_1  |[0m     return self._execute_internal(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:2237: in _execute_internal
[36mserver_1  |[0m     conn = self._connection_for_bind(bind)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:2106: in _connection_for_bind
[36mserver_1  |[0m     return trans._connection_for_bind(engine, execution_options)
[36mserver_1  |[0m <string>:2: in _connection_for_bind
[36mserver_1  |[0m     ???
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
[36mserver_1  |[0m     ret_value = fn(self, *arg, **kw)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:1189: in _connection_for_bind
[36mserver_1  |[0m     conn = bind.connect()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py:3278: in connect
[36mserver_1  |[0m     return self._connection_cls(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py:146: in __init__
[36mserver_1  |[0m     self._dbapi_connection = engine.raw_connection()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py:3302: in raw_connection
[36mserver_1  |[0m     return self.pool.connect()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:449: in connect
[36mserver_1  |[0m     return _ConnectionFairy._checkout(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:1263: in _checkout
[36mserver_1  |[0m     fairy = _ConnectionRecord.checkout(pool)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:712: in checkout
[36mserver_1  |[0m     rec = pool._do_get()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py:179: in _do_get
[36mserver_1  |[0m     with util.safe_reraise():
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py:146: in __exit__
[36mserver_1  |[0m     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py:177: in _do_get
[36mserver_1  |[0m     return self._create_connection()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:390: in _create_connection
[36mserver_1  |[0m     return _ConnectionRecord(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:674: in __init__
[36mserver_1  |[0m     self.__connect()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:900: in __connect
[36mserver_1  |[0m     with util.safe_reraise():
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py:146: in __exit__
[36mserver_1  |[0m     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:896: in __connect
[36mserver_1  |[0m     self.dbapi_connection = connection = pool._invoke_creator(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/create.py:643: in connect
[36mserver_1  |[0m     return dialect.connect(*cargs, **cparams)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py:621: in connect
[36mserver_1  |[0m     return self.loaded_dbapi.connect(*cargs, **cparams)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py:949: in connect
[36mserver_1  |[0m     await_only(creator_fn(*arg, **kw)),
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
[36mserver_1  |[0m     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
[36mserver_1  |[0m     value = await result
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connection.py:2421: in connect
[36mserver_1  |[0m     return await connect_utils._connect(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:1075: in _connect
[36mserver_1  |[0m     raise last_error or exceptions.TargetServerAttributeNotMatched(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:1049: in _connect
[36mserver_1  |[0m     conn = await _connect_addr(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:886: in _connect_addr
[36mserver_1  |[0m     return await __connect_addr(params, True, *args)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:931: in __connect_addr
[36mserver_1  |[0m     tr, pr = await connector
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:802: in _create_ssl_connection
[36mserver_1  |[0m     tr, pr = await loop.create_connection(
[36mserver_1  |[0m /usr/local/lib/python3.11/asyncio/base_events.py:1046: in create_connection
[36mserver_1  |[0m     infos = await self._ensure_resolved(
[36mserver_1  |[0m /usr/local/lib/python3.11/asyncio/base_events.py:1420: in _ensure_resolved
[36mserver_1  |[0m     return await loop.getaddrinfo(host, port, family=family, type=type,
[36mserver_1  |[0m /usr/local/lib/python3.11/asyncio/base_events.py:868: in getaddrinfo
[36mserver_1  |[0m     return await self.run_in_executor(
[36mserver_1  |[0m /usr/local/lib/python3.11/concurrent/futures/thread.py:58: in run
[36mserver_1  |[0m     result = self.fn(*self.args, **self.kwargs)
[36mserver_1  |[0m _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[36mserver_1  |[0m 
[36mserver_1  |[0m host = 'postgres_container', port = 5432, family = 0
[36mserver_1  |[0m type = <SocketKind.SOCK_STREAM: 1>, proto = 0, flags = 0
[36mserver_1  |[0m 
[36mserver_1  |[0m     def getaddrinfo(host, port, family=0, type=0, proto=0, flags=0):
[36mserver_1  |[0m         """Resolve host and port into list of address info entries.
[36mserver_1  |[0m     
[36mserver_1  |[0m         Translate the host/port argument into a sequence of 5-tuples that contain
[36mserver_1  |[0m         all the necessary arguments for creating a socket connected to that service.
[36mserver_1  |[0m         host is a domain name, a string representation of an IPv4/v6 address or
[36mserver_1  |[0m         None. port is a string service name such as 'http', a numeric port number or
[36mserver_1  |[0m         None. By passing None as the value of host and port, you can pass NULL to
[36mserver_1  |[0m         the underlying C API.
[36mserver_1  |[0m     
[36mserver_1  |[0m         The family, type and proto arguments can be optionally specified in order to
[36mserver_1  |[0m         narrow the list of addresses returned. Passing zero as a value for each of
[36mserver_1  |[0m         these arguments selects the full range of results.
[36mserver_1  |[0m         """
[36mserver_1  |[0m         # We override this function since we want to translate the numeric family
[36mserver_1  |[0m         # and socket type values to enum constants.
[36mserver_1  |[0m         addrlist = []
[36mserver_1  |[0m >       for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mserver_1  |[0m E       socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mserver_1  |[0m 
[36mserver_1  |[0m /usr/local/lib/python3.11/socket.py:974: gaierror
[36mserver_1  |[0m =========================== short test summary info ============================
[36mserver_1  |[0m FAILED tests/test_application.py::test_all_users - socket.gaierror: [Errno -3...
[36mserver_1  |[0m ============================== 1 failed in 0.98s ===============================
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/anyio/streams/memory.py:183: ResourceWarning: Unclosed <MemoryObjectReceiveStream at 7c54e82bd890>
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
[36mserver_1  |[0m The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"
[36mserver_1  |[0m 
[36mserver_1  |[0m   warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
[36mserver_1  |[0m ============================= test session starts ==============================
[36mserver_1  |[0m platform linux -- Python 3.11.11, pytest-8.3.3, pluggy-1.5.0 -- /usr/local/bin/python3.11
[36mserver_1  |[0m cachedir: .pytest_cache
[36mserver_1  |[0m rootdir: /server
[36mserver_1  |[0m plugins: asyncio-0.24.0, Faker-30.8.2, anyio-4.6.2.post1
[36mserver_1  |[0m asyncio: mode=Mode.STRICT, default_loop_scope=None
[36mserver_1  |[0m collecting ... collected 1 item
[36mserver_1  |[0m 
[36mserver_1  |[0m tests/test_application.py::test_all_users FAILED                         [100%]
[36mserver_1  |[0m 
[36mserver_1  |[0m =================================== FAILURES ===================================
[36mserver_1  |[0m ________________________________ test_all_users ________________________________
[36mserver_1  |[0m   + Exception Group Traceback (most recent call last):
[36mserver_1  |[0m   |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
[36mserver_1  |[0m   |     yield
[36mserver_1  |[0m   |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 186, in __call__
[36mserver_1  |[0m   |     async with anyio.create_task_group() as task_group:
[36mserver_1  |[0m   |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 763, in __aexit__
[36mserver_1  |[0m   |     raise BaseExceptionGroup(
[36mserver_1  |[0m   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
[36mserver_1  |[0m   +-+---------------- 1 ----------------
[36mserver_1  |[0m     | Traceback (most recent call last):
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
[36mserver_1  |[0m     |     result: TResult | None = func()
[36mserver_1  |[0m     |                              ^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/runner.py", line 242, in <lambda>
[36mserver_1  |[0m     |     lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
[36mserver_1  |[0m     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_hooks.py", line 513, in __call__
[36mserver_1  |[0m     |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
[36mserver_1  |[0m     |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 139, in _multicall
[36mserver_1  |[0m     |     raise exception.with_traceback(exception.__traceback__)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/threadexception.py", line 92, in pytest_runtest_call
[36mserver_1  |[0m     |     yield from thread_exception_runtest_hook()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/threadexception.py", line 68, in thread_exception_runtest_hook
[36mserver_1  |[0m     |     yield
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/unraisableexception.py", line 95, in pytest_runtest_call
[36mserver_1  |[0m     |     yield from unraisable_exception_runtest_hook()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/unraisableexception.py", line 70, in unraisable_exception_runtest_hook
[36mserver_1  |[0m     |     yield
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/logging.py", line 846, in pytest_runtest_call
[36mserver_1  |[0m     |     yield from self._runtest_for(item, "call")
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/logging.py", line 829, in _runtest_for
[36mserver_1  |[0m     |     yield
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/capture.py", line 880, in pytest_runtest_call
[36mserver_1  |[0m     |     return (yield)
[36mserver_1  |[0m     |             ^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 122, in _multicall
[36mserver_1  |[0m     |     teardown.throw(exception)  # type: ignore[union-attr]
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/skipping.py", line 257, in pytest_runtest_call
[36mserver_1  |[0m     |     return (yield)
[36mserver_1  |[0m     |             ^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 103, in _multicall
[36mserver_1  |[0m     |     res = hook_impl.function(*args)
[36mserver_1  |[0m     |           ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/runner.py", line 174, in pytest_runtest_call
[36mserver_1  |[0m     |     item.runtest()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 457, in runtest
[36mserver_1  |[0m     |     super().runtest()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/python.py", line 1627, in runtest
[36mserver_1  |[0m     |     self.ihook.pytest_pyfunc_call(pyfuncitem=self)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_hooks.py", line 513, in __call__
[36mserver_1  |[0m     |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
[36mserver_1  |[0m     |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 182, in _multicall
[36mserver_1  |[0m     |     return outcome.get_result()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_result.py", line 100, in get_result
[36mserver_1  |[0m     |     raise exc.with_traceback(exc.__traceback__)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pluggy/_callers.py", line 103, in _multicall
[36mserver_1  |[0m     |     res = hook_impl.function(*args)
[36mserver_1  |[0m     |           ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/_pytest/python.py", line 159, in pytest_pyfunc_call
[36mserver_1  |[0m     |     result = testfunction(**testargs)
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 929, in inner
[36mserver_1  |[0m     |     _loop.run_until_complete(task)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
[36mserver_1  |[0m     |     return future.result()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/tests/test_application.py", line 11, in test_all_users
[36mserver_1  |[0m     |     response = client.get("/api/all_users")
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 514, in get
[36mserver_1  |[0m     |     return super().get(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 1066, in get
[36mserver_1  |[0m     |     return self.request(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 484, in request
[36mserver_1  |[0m     |     return super().request(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
[36mserver_1  |[0m     |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
[36mserver_1  |[0m     |     response = self._send_handling_auth(
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
[36mserver_1  |[0m     |     response = self._send_handling_redirects(
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
[36mserver_1  |[0m     |     response = self._send_single_request(request)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
[36mserver_1  |[0m     |     response = transport.handle_request(request)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 377, in handle_request
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/testclient.py", line 374, in handle_request
[36mserver_1  |[0m     |     portal.call(self.app, scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/anyio/from_thread.py", line 290, in call
[36mserver_1  |[0m     |     return cast(T_Retval, self.start_task_soon(func, *args).result())
[36mserver_1  |[0m     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/concurrent/futures/_base.py", line 456, in result
[36mserver_1  |[0m     |     return self.__get_result()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result
[36mserver_1  |[0m     |     raise self._exception
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/anyio/from_thread.py", line 221, in _call_func
[36mserver_1  |[0m     |     retval = await retval_or_awaitable
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
[36mserver_1  |[0m     |     await super().__call__(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
[36mserver_1  |[0m     |     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
[36mserver_1  |[0m     |     await self.app(scope, receive, _send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
[36mserver_1  |[0m     |     with collapse_excgroups():
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
[36mserver_1  |[0m     |     self.gen.throw(typ, value, traceback)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
[36mserver_1  |[0m     |     response = await self.dispatch_func(request, call_next)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/application/main.py", line 72, in check_user_middleware
[36mserver_1  |[0m     |     response = await call_next(request)  # Передаем управление следующему обработчику
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
[36mserver_1  |[0m     |     raise app_exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
[36mserver_1  |[0m     |     await self.app(scope, receive_or_disconnect, send_no_error)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
[36mserver_1  |[0m     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
[36mserver_1  |[0m     |     await app(scope, receive, sender)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
[36mserver_1  |[0m     |     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
[36mserver_1  |[0m     |     await route.handle(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
[36mserver_1  |[0m     |     await self.app(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
[36mserver_1  |[0m     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
[36mserver_1  |[0m     |     raise exc
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
[36mserver_1  |[0m     |     await app(scope, receive, sender)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
[36mserver_1  |[0m     |     response = await f(request)
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
[36mserver_1  |[0m     |     raw_response = await run_endpoint_function(
[36mserver_1  |[0m     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
[36mserver_1  |[0m     |     return await dependant.call(**values)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/application/api/endpoints.py", line 28, in get_all_users
[36mserver_1  |[0m     |     result = await UserDAO.find_all()
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/server/application/crud.py", line 86, in find_all
[36mserver_1  |[0m     |     result = await session.execute(query)
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
[36mserver_1  |[0m     |     result = await greenlet_spawn(
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
[36mserver_1  |[0m     |     result = context.throw(*sys.exc_info())
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
[36mserver_1  |[0m     |     return self._execute_internal(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
[36mserver_1  |[0m     |     conn = self._connection_for_bind(bind)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
[36mserver_1  |[0m     |     return trans._connection_for_bind(engine, execution_options)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "<string>", line 2, in _connection_for_bind
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
[36mserver_1  |[0m     |     ret_value = fn(self, *arg, **kw)
[36mserver_1  |[0m     |                 ^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
[36mserver_1  |[0m     |     conn = bind.connect()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
[36mserver_1  |[0m     |     return self._connection_cls(self)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
[36mserver_1  |[0m     |     self._dbapi_connection = engine.raw_connection()
[36mserver_1  |[0m     |                              ^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
[36mserver_1  |[0m     |     return self.pool.connect()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 449, in connect
[36mserver_1  |[0m     |     return _ConnectionFairy._checkout(self)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
[36mserver_1  |[0m     |     fairy = _ConnectionRecord.checkout(pool)
[36mserver_1  |[0m     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
[36mserver_1  |[0m     |     rec = pool._do_get()
[36mserver_1  |[0m     |           ^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
[36mserver_1  |[0m     |     with util.safe_reraise():
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
[36mserver_1  |[0m     |     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
[36mserver_1  |[0m     |     return self._create_connection()
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
[36mserver_1  |[0m     |     return _ConnectionRecord(self)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
[36mserver_1  |[0m     |     self.__connect()
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
[36mserver_1  |[0m     |     with util.safe_reraise():
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
[36mserver_1  |[0m     |     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
[36mserver_1  |[0m     |     self.dbapi_connection = connection = pool._invoke_creator(self)
[36mserver_1  |[0m     |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/create.py", line 643, in connect
[36mserver_1  |[0m     |     return dialect.connect(*cargs, **cparams)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 621, in connect
[36mserver_1  |[0m     |     return self.loaded_dbapi.connect(*cargs, **cparams)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 949, in connect
[36mserver_1  |[0m     |     await_only(creator_fn(*arg, **kw)),
[36mserver_1  |[0m     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
[36mserver_1  |[0m     |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
[36mserver_1  |[0m     |     value = await result
[36mserver_1  |[0m     |             ^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2421, in connect
[36mserver_1  |[0m     |     return await connect_utils._connect(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1075, in _connect
[36mserver_1  |[0m     |     raise last_error or exceptions.TargetServerAttributeNotMatched(
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1049, in _connect
[36mserver_1  |[0m     |     conn = await _connect_addr(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 886, in _connect_addr
[36mserver_1  |[0m     |     return await __connect_addr(params, True, *args)
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 931, in __connect_addr
[36mserver_1  |[0m     |     tr, pr = await connector
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 802, in _create_ssl_connection
[36mserver_1  |[0m     |     tr, pr = await loop.create_connection(
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1046, in create_connection
[36mserver_1  |[0m     |     infos = await self._ensure_resolved(
[36mserver_1  |[0m     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1420, in _ensure_resolved
[36mserver_1  |[0m     |     return await loop.getaddrinfo(host, port, family=family, type=type,
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/asyncio/base_events.py", line 868, in getaddrinfo
[36mserver_1  |[0m     |     return await self.run_in_executor(
[36mserver_1  |[0m     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
[36mserver_1  |[0m     |     result = self.fn(*self.args, **self.kwargs)
[36mserver_1  |[0m     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     |   File "/usr/local/lib/python3.11/socket.py", line 974, in getaddrinfo
[36mserver_1  |[0m     |     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mserver_1  |[0m     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[36mserver_1  |[0m     | socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mserver_1  |[0m     +------------------------------------
[36mserver_1  |[0m 
[36mserver_1  |[0m During handling of the above exception, another exception occurred:
[36mserver_1  |[0m 
[36mserver_1  |[0m setup_database = <async_generator object setup_database at 0x7e70d2d5ee30>
[36mserver_1  |[0m 
[36mserver_1  |[0m     @pytest.mark.asyncio
[36mserver_1  |[0m     async def test_all_users(setup_database):
[36mserver_1  |[0m         """ Проверка всех GET маршрутов """
[36mserver_1  |[0m >       response = client.get("/api/all_users")
[36mserver_1  |[0m 
[36mserver_1  |[0m tests/test_application.py:11: 
[36mserver_1  |[0m _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:514: in get
[36mserver_1  |[0m     return super().get(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:1066: in get
[36mserver_1  |[0m     return self.request(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:484: in request
[36mserver_1  |[0m     return super().request(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:837: in request
[36mserver_1  |[0m     return self.send(request, auth=auth, follow_redirects=follow_redirects)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:926: in send
[36mserver_1  |[0m     response = self._send_handling_auth(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:954: in _send_handling_auth
[36mserver_1  |[0m     response = self._send_handling_redirects(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:991: in _send_handling_redirects
[36mserver_1  |[0m     response = self._send_single_request(request)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/httpx/_client.py:1027: in _send_single_request
[36mserver_1  |[0m     response = transport.handle_request(request)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:377: in handle_request
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/testclient.py:374: in handle_request
[36mserver_1  |[0m     portal.call(self.app, scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/anyio/from_thread.py:290: in call
[36mserver_1  |[0m     return cast(T_Retval, self.start_task_soon(func, *args).result())
[36mserver_1  |[0m /usr/local/lib/python3.11/concurrent/futures/_base.py:456: in result
[36mserver_1  |[0m     return self.__get_result()
[36mserver_1  |[0m /usr/local/lib/python3.11/concurrent/futures/_base.py:401: in __get_result
[36mserver_1  |[0m     raise self._exception
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/anyio/from_thread.py:221: in _call_func
[36mserver_1  |[0m     retval = await retval_or_awaitable
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/fastapi/applications.py:1054: in __call__
[36mserver_1  |[0m     await super().__call__(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/applications.py:113: in __call__
[36mserver_1  |[0m     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py:187: in __call__
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py:165: in __call__
[36mserver_1  |[0m     await self.app(scope, receive, _send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:185: in __call__
[36mserver_1  |[0m     with collapse_excgroups():
[36mserver_1  |[0m /usr/local/lib/python3.11/contextlib.py:158: in __exit__
[36mserver_1  |[0m     self.gen.throw(typ, value, traceback)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_utils.py:82: in collapse_excgroups
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:187: in __call__
[36mserver_1  |[0m     response = await self.dispatch_func(request, call_next)
[36mserver_1  |[0m application/main.py:72: in check_user_middleware
[36mserver_1  |[0m     response = await call_next(request)  # Передаем управление следующему обработчику
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:163: in call_next
[36mserver_1  |[0m     raise app_exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/base.py:149: in coro
[36mserver_1  |[0m     await self.app(scope, receive_or_disconnect, send_no_error)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py:62: in __call__
[36mserver_1  |[0m     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:53: in wrapped_app
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:42: in wrapped_app
[36mserver_1  |[0m     await app(scope, receive, sender)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:715: in __call__
[36mserver_1  |[0m     await self.middleware_stack(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:735: in app
[36mserver_1  |[0m     await route.handle(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:288: in handle
[36mserver_1  |[0m     await self.app(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:76: in app
[36mserver_1  |[0m     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:53: in wrapped_app
[36mserver_1  |[0m     raise exc
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py:42: in wrapped_app
[36mserver_1  |[0m     await app(scope, receive, sender)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/starlette/routing.py:73: in app
[36mserver_1  |[0m     response = await f(request)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/fastapi/routing.py:301: in app
[36mserver_1  |[0m     raw_response = await run_endpoint_function(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/fastapi/routing.py:212: in run_endpoint_function
[36mserver_1  |[0m     return await dependant.call(**values)
[36mserver_1  |[0m application/api/endpoints.py:28: in get_all_users
[36mserver_1  |[0m     result = await UserDAO.find_all()
[36mserver_1  |[0m application/crud.py:86: in find_all
[36mserver_1  |[0m     result = await session.execute(query)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py:461: in execute
[36mserver_1  |[0m     result = await greenlet_spawn(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py:201: in greenlet_spawn
[36mserver_1  |[0m     result = context.throw(*sys.exc_info())
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:2362: in execute
[36mserver_1  |[0m     return self._execute_internal(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:2237: in _execute_internal
[36mserver_1  |[0m     conn = self._connection_for_bind(bind)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:2106: in _connection_for_bind
[36mserver_1  |[0m     return trans._connection_for_bind(engine, execution_options)
[36mserver_1  |[0m <string>:2: in _connection_for_bind
[36mserver_1  |[0m     ???
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
[36mserver_1  |[0m     ret_value = fn(self, *arg, **kw)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py:1189: in _connection_for_bind
[36mserver_1  |[0m     conn = bind.connect()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py:3278: in connect
[36mserver_1  |[0m     return self._connection_cls(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py:146: in __init__
[36mserver_1  |[0m     self._dbapi_connection = engine.raw_connection()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py:3302: in raw_connection
[36mserver_1  |[0m     return self.pool.connect()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:449: in connect
[36mserver_1  |[0m     return _ConnectionFairy._checkout(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:1263: in _checkout
[36mserver_1  |[0m     fairy = _ConnectionRecord.checkout(pool)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:712: in checkout
[36mserver_1  |[0m     rec = pool._do_get()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py:179: in _do_get
[36mserver_1  |[0m     with util.safe_reraise():
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py:146: in __exit__
[36mserver_1  |[0m     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/impl.py:177: in _do_get
[36mserver_1  |[0m     return self._create_connection()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:390: in _create_connection
[36mserver_1  |[0m     return _ConnectionRecord(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:674: in __init__
[36mserver_1  |[0m     self.__connect()
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:900: in __connect
[36mserver_1  |[0m     with util.safe_reraise():
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py:146: in __exit__
[36mserver_1  |[0m     raise exc_value.with_traceback(exc_tb)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/pool/base.py:896: in __connect
[36mserver_1  |[0m     self.dbapi_connection = connection = pool._invoke_creator(self)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/create.py:643: in connect
[36mserver_1  |[0m     return dialect.connect(*cargs, **cparams)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py:621: in connect
[36mserver_1  |[0m     return self.loaded_dbapi.connect(*cargs, **cparams)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py:949: in connect
[36mserver_1  |[0m     await_only(creator_fn(*arg, **kw)),
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
[36mserver_1  |[0m     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
[36mserver_1  |[0m     value = await result
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connection.py:2421: in connect
[36mserver_1  |[0m     return await connect_utils._connect(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:1075: in _connect
[36mserver_1  |[0m     raise last_error or exceptions.TargetServerAttributeNotMatched(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:1049: in _connect
[36mserver_1  |[0m     conn = await _connect_addr(
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:886: in _connect_addr
[36mserver_1  |[0m     return await __connect_addr(params, True, *args)
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:931: in __connect_addr
[36mserver_1  |[0m     tr, pr = await connector
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/asyncpg/connect_utils.py:802: in _create_ssl_connection
[36mserver_1  |[0m     tr, pr = await loop.create_connection(
[36mserver_1  |[0m /usr/local/lib/python3.11/asyncio/base_events.py:1046: in create_connection
[36mserver_1  |[0m     infos = await self._ensure_resolved(
[36mserver_1  |[0m /usr/local/lib/python3.11/asyncio/base_events.py:1420: in _ensure_resolved
[36mserver_1  |[0m     return await loop.getaddrinfo(host, port, family=family, type=type,
[36mserver_1  |[0m /usr/local/lib/python3.11/asyncio/base_events.py:868: in getaddrinfo
[36mserver_1  |[0m     return await self.run_in_executor(
[36mserver_1  |[0m /usr/local/lib/python3.11/concurrent/futures/thread.py:58: in run
[36mserver_1  |[0m     result = self.fn(*self.args, **self.kwargs)
[36mserver_1  |[0m _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[36mserver_1  |[0m 
[36mserver_1  |[0m host = 'postgres_container', port = 5432, family = 0
[36mserver_1  |[0m type = <SocketKind.SOCK_STREAM: 1>, proto = 0, flags = 0
[36mserver_1  |[0m 
[36mserver_1  |[0m     def getaddrinfo(host, port, family=0, type=0, proto=0, flags=0):
[36mserver_1  |[0m         """Resolve host and port into list of address info entries.
[36mserver_1  |[0m     
[36mserver_1  |[0m         Translate the host/port argument into a sequence of 5-tuples that contain
[36mserver_1  |[0m         all the necessary arguments for creating a socket connected to that service.
[36mserver_1  |[0m         host is a domain name, a string representation of an IPv4/v6 address or
[36mserver_1  |[0m         None. port is a string service name such as 'http', a numeric port number or
[36mserver_1  |[0m         None. By passing None as the value of host and port, you can pass NULL to
[36mserver_1  |[0m         the underlying C API.
[36mserver_1  |[0m     
[36mserver_1  |[0m         The family, type and proto arguments can be optionally specified in order to
[36mserver_1  |[0m         narrow the list of addresses returned. Passing zero as a value for each of
[36mserver_1  |[0m         these arguments selects the full range of results.
[36mserver_1  |[0m         """
[36mserver_1  |[0m         # We override this function since we want to translate the numeric family
[36mserver_1  |[0m         # and socket type values to enum constants.
[36mserver_1  |[0m         addrlist = []
[36mserver_1  |[0m >       for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mserver_1  |[0m E       socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mserver_1  |[0m 
[36mserver_1  |[0m /usr/local/lib/python3.11/socket.py:974: gaierror
[36mserver_1  |[0m =========================== short test summary info ============================
[36mserver_1  |[0m FAILED tests/test_application.py::test_all_users - socket.gaierror: [Errno -3...
[36mserver_1  |[0m ============================== 1 failed in 0.76s ===============================
[36mserver_1  |[0m /usr/local/lib/python3.11/site-packages/anyio/streams/memory.py:183: ResourceWarning: Unclosed <MemoryObjectReceiveStream at 7e70d2ca2b50>
