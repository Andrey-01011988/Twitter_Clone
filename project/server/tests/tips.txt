import factory
from faker import Faker
from sqlalchemy.orm import Session
from yourapp.models import Users, Tweets, Like, Media, Followers  # Импортируйте ваши модели

fake = Faker()

class UserFactory(factory.SQLAlchemyModelFactory):
    class Meta:
        model = Users
        sqlalchemy_session = your_session  # Укажите вашу сессию SQLAlchemy

    name = factory.LazyAttribute(lambda _: fake.name())
    api_key = factory.LazyAttribute(lambda _: fake.uuid4())

class TweetFactory(factory.SQLAlchemyModelFactory):
    class Meta:
        model = Tweets
        sqlalchemy_session = your_session  # Укажите вашу сессию SQLAlchemy

    text = factory.LazyAttribute(lambda _: fake.sentence())
    author_id = factory.SubFactory(UserFactory)  # Создаем пользователя как автора твита

class LikeFactory(factory.SQLAlchemyModelFactory):
    class Meta:
        model = Like
        sqlalchemy_session = your_session  # Укажите вашу сессию SQLAlchemy

    tweet_id = factory.SubFactory(TweetFactory)  # Создаем твит, который лайкаем
    user_id = factory.SubFactory(UserFactory)  # Создаем пользователя, который ставит лайк

class MediaFactory(factory.SQLAlchemyModelFactory):
    class Meta:
        model = Media
        sqlalchemy_session = your_session  # Укажите вашу сессию SQLAlchemy

    file_body = factory.LazyAttribute(lambda _: fake.binary())
    file_name = factory.LazyAttribute(lambda _: fake.file_name())
    tweet_id = factory.SubFactory(TweetFactory)  # Привязываем медиа к твиту

class FollowerFactory(factory.SQLAlchemyModelFactory):
    class Meta:
        model = Followers
        sqlalchemy_session = your_session  # Укажите вашу сессию SQLAlchemy

    follower_id = factory.SubFactory(UserFactory)
    followed_id = factory.SubFactory(UserFactory)
